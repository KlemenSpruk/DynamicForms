{% load dynamicforms %}
<table id="list-{{ serializer.uuid }}" class="table table-striped">
  <thead>
  <tr>
    {% table_columns_count serializer as columns_count %}
    {% render_table_commands serializer "rowstart" table_header='Control start' %}
    {% for column in serializer.fields %}
      <th>{{ column|capfirst }}</th>{% endfor %}
    {% render_table_commands serializer "rowend" table_header='Control end' %}
  </tr>
  </thead>
  <tbody>
  {% for row in data %}
    <tr data-id="{{ row.id }}"
        {% if crud_form %}
                           style="cursor: pointer"
        {% endif %}
    >
      {% render_table_commands serializer "rowstart" %}
      {% for key, value in row|items %}
        {% if key in serializer.fields %}
          <td {{ value|add_nested_class }} data-name="{{ key }}">
            {% render_table_commands serializer "fieldleft" key %}
            {% render_field_to_table serializer key value %}
            {% render_table_commands serializer "fieldright" key %}
          </td>
        {% endif %}
      {% endfor %}
      {% render_table_commands serializer "rowend" %}
    </tr>
  {% empty %}
    <tr>
      <td colspan="{{ columns_count }}" style="text-align: center">No data</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% render_table_commands serializer "onrowclick" %}
{#TODO: Unit test: preveri, če se on click in on right click primerno nastavita, kadar se vrstice v tabeli dinamično nalagajo#}
