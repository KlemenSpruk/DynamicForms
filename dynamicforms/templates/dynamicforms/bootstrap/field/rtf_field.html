{% extends DYNAMICFORMS.field_base_template %}
{% load static %}
{% block field_input %}
    <textarea id="{{ field.uuid }}"
              name="{{ field.name }}"
              class="form-control
            {% if field.errors %}is-invalid{% endif %}
            "
              {% if style.placeholder %}placeholder="{{ style.placeholder }}"{% endif %}
              {% if style.rows %}rows="{{ style.rows }}"{% endif %}
              {% if field.read_only %}readonly{% endif %}
    >{% if field.value %}{{ field.value }}{% endif %}</textarea>
    <script>
        var interval = null;
        var editor = null;
        var timestamp = Math.floor(Date.now() / 1000);
        var initFunction = function () {
            interval = window.setInterval(function () {
                if (typeof window['tinymce'] != "undefined" && $("#{{ field.uuid }}").length === 1) {
                    editor = tinyMCE.init({
                        selector: "#{{ field.uuid }}"
                    });
                    window.clearInterval(interval)
                }
                if (Math.floor(Date.now() / 1000) - timestamp > 1) {
                    window.clearInterval(interval)
                }
            }, 150);
        }
        initFunction();
    </script>
{% endblock %}
